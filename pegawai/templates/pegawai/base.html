<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}AppAk{% endblock %}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <style>
      /* Light theme (default) */
      :root {
        --bg-color: #f4f7f6;
        --text-color: #333;
        --card-bg: #ffffff;
        --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --sidebar-bg: #343a40;
        --sidebar-text: white;
        --sidebar-link-color: #cda45e;
        --sidebar-link-hover-bg: #495057;
        --sidebar-link-hover-color: white;
        --toggle-btn-bg: #343a40;
        --toggle-btn-text: white;
        --toggle-btn-hover-bg: #495057;
        --card-border: none;
        --card-border-radius: 10px;
        --header-bg: #ffffff;
        --header-text: #333;
        --table-bg: #ffffff;
        --table-text: #333;
        --table-border: #dee2e6;
        --btn-primary-bg: #007bff;
        --btn-primary-border: #007bff;
        --btn-primary-text: #fff;
        --btn-primary-hover-bg: #0056b3;
        --btn-primary-hover-border: #0056b3;
        --btn-secondary-bg: #6c757d;
        --btn-secondary-border: #6c757d;
        --btn-secondary-text: #fff;
        --btn-secondary-hover-bg: #545b62;
        --btn-secondary-hover-border: #545b62;
        --form-control-bg: #fff;
        --form-control-border: #ced4da;
        --form-control-text: #495057;
        --alert-success-bg: #d4edda;
        --alert-success-text: #155724;
        --alert-success-border: #c3e6cb;
        --alert-warning-bg: #fff3cd;
        --alert-warning-text: #856404;
        --alert-warning-border: #ffeaa7;
        --alert-danger-bg: #f8d7da;
        --alert-danger-text: #721c24;
        --alert-danger-border: #f5c6cb;
        --alert-info-bg: #d1ecf1;
        --alert-info-text: #0c5460;
        --alert-info-border: #bee5eb;
      }

      /* Dark theme */
      .dark-theme {
        --bg-color: #121212;
        --text-color: #e0e0e0;
        --text-secondary: #b0b0b0;
        --card-bg: #1e1e1e;
        --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        --sidebar-bg: #252525;
        --sidebar-text: #e0e0e0;
        --sidebar-link-color: #bb86fc;
        --sidebar-link-hover-bg: #333333;
        --sidebar-link-hover-color: #ffffff;
        --toggle-btn-bg: #333333;
        --toggle-btn-text: #ffffff;
        --toggle-btn-hover-bg: #444444;
        --card-border: 1px solid #333333;
        --header-bg: #252525;
        --header-text: #ffffff;
        --table-bg: #1e1e1e;
        --table-text: #e0e0e0;
        --table-border: #333333;
        --btn-primary-bg: #3a7bd5;
        --btn-primary-border: #3a7bd5;
        --btn-primary-text: #ffffff;
        --btn-primary-hover-bg: #2a5cad;
        --btn-primary-hover-border: #2a5cad;
        --btn-secondary-bg: #6c757d;
        --btn-secondary-border: #6c757d;
        --btn-secondary-text: #ffffff;
        --btn-secondary-hover-bg: #545b62;
        --btn-secondary-hover-border: #545b62;
        --form-control-bg: #2d2d2d;
        --form-control-border: #444444;
        --form-control-text: #e0e0e0;
        --form-control-placeholder: #a0a0a0;
        --alert-success-bg: #1b5e20;
        --alert-success-text: #c8e6c9;
        --alert-success-border: #388e3c;
        --alert-warning-bg: #ff8f00;
        --alert-warning-text: #ffecb3;
        --alert-warning-border: #f57c00;
        --alert-danger-bg: #b71c1c;
        --alert-danger-text: #ffcdd2;
        --alert-danger-border: #d32f2f;
        --alert-info-bg: #006064;
        --alert-info-text: #b2ebf2;
        --alert-info-border: #00838f;
        --link-color: #58a6ff;
        --link-hover-color: #79b8ff;
      }

      body {
        background-color: var(--bg-color);
        color: var(--text-color);
        overflow-x: hidden;
        transition:
          background-color 0.3s ease,
          color 0.3s ease;
      }

      /* Overlay for popup sidebar */
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1040;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .overlay.active {
        opacity: 1;
        visibility: visible;
      }

      /* Popup sidebar styles */
      .popup-sidebar {
        position: fixed;
        top: 0;
        left: -300px;
        width: 280px;
        height: 100vh;
        background-color: var(--sidebar-bg);
        color: var(--sidebar-text);
        padding-top: 20px;
        z-index: 1050;
        transition: left 0.3s ease;
        box-shadow: 3px 0 10px rgba(0, 0, 0, 0.2);
      }

      .popup-sidebar.active {
        left: 0;
      }

      .popup-sidebar h2 {
        text-align: center;
        margin-bottom: 30px;
        padding: 0 20px;
      }

      .popup-sidebar .nav-link {
        color: var(--sidebar-link-color);
        padding: 12px 20px;
        display: flex;
        align-items: center;
        border-radius: 0;
        transition: all 0.2s;
      }

      .popup-sidebar .nav-link:hover {
        background-color: var(--sidebar-link-hover-bg);
        color: var(--sidebar-link-hover-color);
      }

      .popup-sidebar .nav-link i {
        margin-right: 10px;
        min-width: 20px;
        text-align: center;
      }

      /* Toggle button */
      .sidebar-toggle {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1060;
        background-color: var(--toggle-btn-bg);
        color: var(--toggle-btn-text);
        border: none;
        border-radius: 5px;
        padding: 10px 15px;
        cursor: pointer;
        font-size: 1.2rem;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: all 0.3s;
      }

      .sidebar-toggle:hover {
        background-color: var(--toggle-btn-hover-bg);
        transform: translateY(-2px);
      }

      /* Theme toggle button */
      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1060;
        background-color: var(--toggle-btn-bg);
        color: var(--toggle-btn-text);
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        font-size: 1.2rem;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .theme-toggle:hover {
        background-color: var(--toggle-btn-hover-bg);
        transform: scale(1.1);
      }

      /* Content area */
      .content {
        padding: 80px 20px 20px 20px;
        min-height: 100vh;
        transition: margin-left 0.3s ease;
      }

      .card {
        background-color: var(--card-bg);
        border: var(--card-border);
        border-radius: var(--card-border-radius);
        box-shadow: var(--card-shadow);
        transition:
          background-color 0.3s ease,
          border 0.3s ease;
      }

      .card-header {
        background-color: var(--header-bg);
        color: var(--header-text);
        border-bottom: 1px solid var(--table-border);
      }

      table {
        background-color: var(--table-bg);
        color: var(--table-text);
      }

      table th,
      table td {
        border-color: var(--table-border);
        color: var(--table-text);
      }

      .form-control {
        background-color: var(--form-control-bg);
        border: 1px solid var(--form-control-border);
        color: var(--form-control-text);
      }

      .form-control:focus {
        background-color: var(--form-control-bg);
        border-color: var(--btn-primary-bg);
        color: var(--form-control-text);
        box-shadow: 0 0 0 0.2rem rgba(33, 150, 243, 0.25);
      }

      .btn-primary {
        background-color: var(--btn-primary-bg);
        border-color: var(--btn-primary-border);
        color: var(--btn-primary-text);
      }

      .btn-primary:hover {
        background-color: var(--btn-primary-hover-bg);
        border-color: var(--btn-primary-hover-border);
      }

      .btn-secondary {
        background-color: var(--btn-secondary-bg);
        border-color: var(--btn-secondary-border);
        color: var(--btn-secondary-text);
      }

      .btn-secondary:hover {
        background-color: var(--btn-secondary-hover-bg);
        border-color: var(--btn-secondary-hover-border);
      }

      .alert-success {
        background-color: var(--alert-success-bg);
        color: var(--alert-success-text);
        border-color: var(--alert-success-border);
      }

      .alert-warning {
        background-color: var(--alert-warning-bg);
        color: var(--alert-warning-text);
        border-color: var(--alert-warning-border);
      }

      .alert-danger {
        background-color: var(--alert-danger-bg);
        color: var(--alert-danger-text);
        border-color: var(--alert-danger-border);
      }

      .alert-info {
        background-color: var(--alert-info-bg);
        color: var(--alert-info-text);
        border-color: var(--alert-info-border);
      }

      a {
        color: var(--link-color);
      }

      a:hover {
        color: var(--link-hover-color);
      }

      .text-muted {
        color: var(--text-secondary) !important;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .content {
          padding: 80px 15px 15px 15px;
        }
      }
    </style>
    {% block extra_head %}{% endblock %}
  </head>
  <body>
    <!-- Theme toggle button -->
    <button
      class="theme-toggle"
      id="themeToggle"
      title="Toggle dark/light mode"
    >
      <i class="fas fa-moon" id="themeIcon"></i>
    </button>

    <!-- Sidebar toggle button -->
    <button class="sidebar-toggle" id="sidebarToggle">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Popup Sidebar -->
    <div class="popup-sidebar" id="popupSidebar">
      <h2>AppAk</h2>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'dashboard' %}">
            <i class="fas fa-tachometer-alt"></i>Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            data-bs-toggle="collapse"
            href="#manajemen-data-dropdown"
            role="button"
            aria-expanded="false"
            aria-controls="manajemen-data-dropdown"
          >
            <i class="fas fa-database"></i>Manajemen Data
          </a>
          <div class="collapse" id="manajemen-data-dropdown">
            <ul class="nav flex-column ms-3">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'pegawai_list' %}">
                  <i class="fas fa-users"></i>Daftar Pegawai
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'instansi_list' %}">
                  <i class="fas fa-building"></i>Daftar Instansi
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'penilai_list' %}">
                  <i class="fas fa-user-tie"></i>Daftar Penilai
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'angka_integrasi_list' %}">
                  <i class="fas fa-calculator"></i>Angka Integrasi
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'ak_list' %}">
                  <i class="fas fa-chart-line"></i>Angka Kredit
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'ak_pendidikan_list' %}">
                  <i class="fas fa-graduation-cap"></i>Angka Kredit Pendidikan
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'pegawai_export_import' %}">
                  <i class="fas fa-file-export"></i>Export/Import Pegawai
                </a>
              </li>
            </ul>
          </div>
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            data-bs-toggle="collapse"
            href="#laporan-dropdown"
            role="button"
            aria-expanded="false"
            aria-controls="laporan-dropdown"
          >
            <i class="fas fa-file-alt"></i>Cetak AK
          </a>
          <div class="collapse" id="laporan-dropdown">
            <ul class="nav flex-column ms-3">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'konversi' %}">
                  <i class="fas fa-exchange-alt"></i>Konversi
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'akumulasi' %}">
                  <i class="fas fa-layer-group"></i>Akumulasi
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'penetapan' %}">
                  <i class="fas fa-clipboard-check"></i>Penetapan
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'merge_report' %}">
                  <i class="fas fa-code-merge"></i>Merge Report
                </a>
              </li>
            </ul>
          </div>
        </li>
        <!-- <li class="nav-item">
          <a class="nav-link" href="{% url 'instruction_manual' %}">
            <i class="fas fa-book"></i> Petunjuk Penggunaan
          </a>
        </li> -->
        <!-- <li class="nav-item">
                <a class="nav-link" href="{% url 'merge_report' %}"><i class="fas fa-tachometer-alt"></i>Dokumen</a>
            </li> -->
      </ul>
    </div>

    <div class="content">{% block content %}{% endblock %}</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Theme switching functionality
      const themeToggle = document.getElementById("themeToggle");
      const themeIcon = document.getElementById("themeIcon");
      const body = document.body;

      // Check for saved theme preference or respect OS preference
      const savedTheme = localStorage.getItem("theme");
      const prefersDarkScheme = window.matchMedia(
        "(prefers-color-scheme: dark)",
      );

      // Set the initial theme based on saved preference or OS preference
      if (savedTheme === "dark" || (!savedTheme && prefersDarkScheme.matches)) {
        body.classList.add("dark-theme");
        themeIcon.classList.remove("fa-moon");
        themeIcon.classList.add("fa-sun");
      } else {
        body.classList.remove("dark-theme");
        themeIcon.classList.remove("fa-sun");
        themeIcon.classList.add("fa-moon");
      }

      // Toggle theme function
      function toggleTheme() {
        body.classList.toggle("dark-theme");

        if (body.classList.contains("dark-theme")) {
          themeIcon.classList.remove("fa-moon");
          themeIcon.classList.add("fa-sun");
          localStorage.setItem("theme", "dark");
        } else {
          themeIcon.classList.remove("fa-sun");
          themeIcon.classList.add("fa-moon");
          localStorage.setItem("theme", "light");
        }
      }

      // Add event listener to theme toggle button
      themeToggle.addEventListener("click", toggleTheme);

      // Toggle sidebar and overlay
      const sidebar = document.getElementById("popupSidebar");
      const overlay = document.getElementById("overlay");
      const toggleBtn = document.getElementById("sidebarToggle");

      function toggleSidebar() {
        sidebar.classList.toggle("active");
        overlay.classList.toggle("active");
        document.body.style.overflow = sidebar.classList.contains("active")
          ? "hidden"
          : "";

        // Change icon based on state
        const icon = toggleBtn.querySelector("i");
        if (sidebar.classList.contains("active")) {
          icon.classList.remove("fa-bars");
          icon.classList.add("fa-times");
        } else {
          icon.classList.remove("fa-times");
          icon.classList.add("fa-bars");
        }
      }

      // Event listeners
      toggleBtn.addEventListener("click", toggleSidebar);
      overlay.addEventListener("click", toggleSidebar);
    </script>
    {% block extra_script %}{% endblock %}
  </body>
</html>
